<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Allergen and Non-Allergen Details</title>

    <!-- Bootstrap CSS -->
    <!-- Include Bootstrap Icons (in <head> of your HTML file) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
<link rel="icon" href="../../assets/logo.png" type="image/x-icon">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../../style.css" />
</head>

<body class="d-flex flex-column min-vh-100">
<a href="../../index.html" class="btn btn-primary position-fixed top-0 start-0 m-3 z-3 shadow">
  üè† Home
</a>
    <!-- Header with Navbar -->
    <header class="header-hero position-relative text-white">
        <div class="overlay"></div>



        <!-- Title -->
        <div class="container text-center pb-4">
            <h1 class="display-5 fw-bold">Allergen vs Non-Allergen Products</h1>
            <p class="lead">Understand the difference between allergenic and non-allergenic products.</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container my-5">
        <div class="table-responsive">
            <table class="table table-bordered shadow-sm text-center align-middle" id="allergenTable">
                <thead class="table-dark">
                    <tr>
                        <th>Allergens</th>
                        <th>Non-Allergens</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>

    </main>

    <!-- Footer -->
    <footer class="footer mt-auto py-3 text-white text-center">
        <div class="container">
            <small>&copy; 2025 Awareness Portal. All rights reserved.</small>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Function to parse CSV text into an array of objects
        function parseCSV(text) {
            const lines = text.trim().split('\n');
            const headers = lines[0].split(',');
            const rows = lines.slice(1);

            return rows.map(line => {
                const values = line.split(',');
                let obj = {};
                headers.forEach((header, i) => {
                    obj[header.trim()] = values[i].trim();
                });
                return obj;
            });
        }

        window.onload = function () {
            fetch('detailsRM.csv?v=' + new Date().getTime())
                .then(response => response.text())
                .then(data => {
                    const parsedData = parseCSV(data);
                    const tbody = document.querySelector('#allergenTable tbody');

                    parsedData.forEach(row => {
                        const tr = document.createElement('tr');
                        const tdAllergens = document.createElement('td');
                        tdAllergens.textContent = row['allergens'];
                        const tdNonAllergens = document.createElement('td');
                        tdNonAllergens.textContent = row['non allergens'];

                        tr.appendChild(tdAllergens);
                        tr.appendChild(tdNonAllergens);
                        tbody.appendChild(tr);
                        console.log(tr);
                    });
                })
                .catch(error => {
                    console.error('Error loading the CSV file:', error);
                });
        };
    </script>
</body>

</html>